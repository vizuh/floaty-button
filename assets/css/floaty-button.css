/* ==============================
   Floaty Button — WhatsApp Skin
   Scoped + premium bubble
   ============================== */

#floaty-button-container{
  z-index: 999999;

  /* Tweakables */
  --floaty-wa-offset: 20px;
  --floaty-wa-size: clamp(58px, 4vw + 44px, 66px);

  --floaty-wa-bg: #25d366;
  --floaty-wa-bg-hover: #1fb156;

  /* More “premium” shadow stack */
  --floaty-wa-shadow:
    0 14px 30px rgba(0,0,0,.18),
    0 6px 14px rgba(0,0,0,.12);
  --floaty-wa-shadow-hover:
    0 18px 42px rgba(0,0,0,.26),
    0 8px 18px rgba(0,0,0,.14);

  --floaty-wa-focus:
    0 0 0 3px rgba(255,255,255,.9),
    0 0 0 6px rgba(37,211,102,.35);

  --floaty-wa-ease: 180ms cubic-bezier(.2,.8,.2,1);
}

/* Button */
#floaty-button-container .floaty-whatsapp-btn{
  position: fixed;
  width: var(--floaty-wa-size);
  height: var(--floaty-wa-size);
  border-radius: 9999px;
  padding: 0;
  line-height: 0;

  /* safe-area aware bottom offset */
  bottom: calc(var(--floaty-wa-offset) + env(safe-area-inset-bottom, 0px));

  display: inline-flex;
  align-items: center;
  justify-content: center;

  background:
    radial-gradient(120% 120% at 30% 25%, rgba(255,255,255,.22) 0%, rgba(255,255,255,0) 52%),
    linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,0) 55%),
    var(--floaty-wa-bg);

  box-shadow: var(--floaty-wa-shadow);
  text-decoration: none;
  border: 0;
  cursor: pointer;

  /* Important for ::before/::after */
  position: fixed;
  isolation: isolate;         /* keeps highlights contained */
  overflow: visible;
  transform: translateZ(0);   /* crisper on some GPUs */

  transition:
    transform var(--floaty-wa-ease),
    box-shadow var(--floaty-wa-ease),
    background var(--floaty-wa-ease);

  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

#floaty-button-container .floaty-whatsapp-btn.floaty-position-bottom_right{
  right: calc(var(--floaty-wa-offset) + env(safe-area-inset-right, 0px));
}

#floaty-button-container .floaty-whatsapp-btn.floaty-position-bottom_left{
  left: calc(var(--floaty-wa-offset) + env(safe-area-inset-left, 0px));
}

/* Subtle glass highlight */
#floaty-button-container .floaty-whatsapp-btn::before{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(90% 70% at 70% 28%, rgba(255,255,255,.22) 0%, rgba(255,255,255,0) 60%);
  opacity: .85;
  pointer-events: none;
  z-index: 0;
}

/* Hover / focus */
#floaty-button-container .floaty-whatsapp-btn:hover{
  transform: translateY(-2px) scale(1.03);
  box-shadow: var(--floaty-wa-shadow-hover);
  background:
    radial-gradient(120% 120% at 30% 25%, rgba(255,255,255,.24) 0%, rgba(255,255,255,0) 52%),
    linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,0) 55%),
    var(--floaty-wa-bg-hover);
}

#floaty-button-container .floaty-whatsapp-btn:active{
  transform: translateY(0) scale(0.99);
  box-shadow: var(--floaty-wa-shadow);
}

/* Modern focus ring (keyboard only) */
#floaty-button-container .floaty-whatsapp-btn:focus{
  outline: none;
}

#floaty-button-container .floaty-whatsapp-btn:focus-visible{
  box-shadow: var(--floaty-wa-shadow-hover), var(--floaty-wa-focus);
}

/* Icon sizing + centering (robust) */
#floaty-button-container .floaty-whatsapp-icon{
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  line-height: 0;
  z-index: 1; /* above highlight */
}

#floaty-button-container .floaty-whatsapp-icon svg{
  width: calc(var(--floaty-wa-size) * 0.46);
  height: calc(var(--floaty-wa-size) * 0.46);
  display: block;
  flex: none;
  fill: #fff;
}

/* Optional “ring” pulse (only if you add the class floaty-whatsapp-btn--pulse) */
#floaty-button-container .floaty-whatsapp-btn.floaty-whatsapp-btn--pulse::after{
  content: "";
  position: absolute;
  inset: -7px;
  border-radius: inherit;
  border: 2px solid rgba(37,211,102,.28);
  opacity: 0;
  transform: scale(.9);
  transition: opacity var(--floaty-wa-ease), transform var(--floaty-wa-ease);
  pointer-events: none;
  z-index: 0;
}

#floaty-button-container .floaty-whatsapp-btn.floaty-whatsapp-btn--pulse:hover::after,
#floaty-button-container .floaty-whatsapp-btn.floaty-whatsapp-btn--pulse:focus-visible::after{
  opacity: 1;
  transform: scale(1.06);
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  #floaty-button-container .floaty-whatsapp-btn,
  #floaty-button-container .floaty-whatsapp-btn::after{
    transition: none !important;
  }
  #floaty-button-container .floaty-whatsapp-btn:hover{
    transform: none !important;
    box-shadow: var(--floaty-wa-shadow) !important;
  }
}
